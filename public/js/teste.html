<html>
    

<head>
    <script src="https://code.jquery.com/jquery-3.1.1.js"  > 
    ;    
    </script>

</head>
<body>
<div class="col-md-6 col-sm-6 col-xs-12">
    <div class="x_panel">
      <div class="x_title">
        <h2>Tabela de Produtos</h2>
       
      </div>
      <div class="x_content">

        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Nome</th>
                    <th>Descrição</th>
                    <th>Valor Unit</th>                   
                    <th>Ações</th>

                </tr>
            </thead>
            <tbody>
                <tr>
                    <td  >BANANA</td>
                    <td  >Prata</td>
                    <td  >5.00</td>
                    <td> <button data-nome="banana"  data-valor="5.50" class="add-to-cart"> Adicionar </button> </td>
                </tr>
                <tr>
                    <td  >Maça</td>
                    <td  >nacional</td>
                    <td  >3.99</td>
                   
                    <td> <button  data-valor="3.99" data-nome="maca" class="add-to-cart btn-primary"> Adicionar </button> </td>
                </tr>                
            </tbody>
           
        </table>
        <br>        
      </div>
      <br>
      
      <h2>Pedido</h2>
        <div class="x_content">
            <button id="clear-cart">Limpar Pedido</button>
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Produto </th>
                        <th colspan="2"> Quantd</th>
                        <th>Valor</th>                        
                    </tr>
                </thead>                
                <tbody id="show-cart" >                                      
                        <!--<td><button  lass="">Remover</button></td> -->               
                                
                </tbody>                                   
            </table>           
            <tfoot >
                <div> Total de itens: <span id="count-cart"></span></div>
                <div> Sub Total:      <span id="total-cart"></span></div>               
            </tfood>
        </div>
    </div>
  </div>

</body>
  <script src="shoppingCart.js"></script>
  <script>

// --------------------------- Jquery-functions  -------------------------------------------//
    $(".add-to-cart").click(function(event){
        event.preventDefault(); // prever outros clicks
        var nome = $(this).attr("data-nome");
        var valor = Number ($(this).attr("data-valor")); // Number String to Number        
        shoppingCart.addProduto(nome, valor, 1);
        displayCart();
    });

    $("#clear-cart").click(function(event){
        shoppingCart.clearCart();
        displayCart();
    });

    function displayCart(){        
       var cartArray = shoppingCart.listCart();
       var output = "";
        for(var i in cartArray){ 
          //alert(cartArray[i].qtd);                               
          output += '<tr>\
            <td>'+cartArray[i].nome+'</td>\
            <td><button class="subtract-item" data-nome="'+cartArray[i].nome+'">-</button>\
            <span>'+cartArray[i].qtd+'</span>\
            <button class="plus-item" data-nome="'+cartArray[i].nome+'">+</button></td>\
            <td><button class="delete-item" data-nome="'+cartArray[i].nome+'">X</button></td>\
            <td>'+cartArray[i].total+'</td>\
            </tr>';
        }
        $("#show-cart").html(output);
        $("#count-cart").html( shoppingCart.countCart() );
        $("#total-cart").html( shoppingCart.totalCost() );
    }

    $("#show-cart").on("click", ".delete-item", function(event){
        var name = $(this).attr("data-nome");
        shoppingCart.removeProdutoAll(name);
        displayCart();
    });

    $("#show-cart").on("click", ".subtract-item", function(event){
        var nome = $(this).attr("data-nome");
        shoppingCart.removeProduto(nome);
        displayCart();
    });

    $("#show-cart").on("click", ".plus-item", function(event){
        var nome = $(this).attr("data-nome");
        shoppingCart.addProduto(nome,0,1,null);
        displayCart();
    });

// END--------------------------- Jquery-functions  -------------------------------------------END //

    displayCart();
   
    console.log("shoppingCart : ");
    console.log(shoppingCart.cart);
  
  
</script> 

</html>